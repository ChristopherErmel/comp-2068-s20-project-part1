<!--
  Step 1: The form must be sharable between the new and edit views.
-->
<form action="<%= (typeof actionPath === 'undefined') ? '/trades' : actionPath %>", method="POST">
  <% if (typeof actionPath !== 'undefined') { %> 
  <input type="hidden" name="id" value="<%= formData.id %>">
  <% } %> 


    <div class="ui-widget">
      <label for="playerNames">PlayerName:</label>
      <input id="playerNames">

      <ul id="players"></ul>

    </div>
    <script>
      $(document).ready(function(){
        $("#playerNames").autocomplete({
          source: async function(req, res){
            let data = await fetch(`http://localhost:3000/search?term=${req.term}`)
            .then(results => results.json())
            .then(results => results.map(result => {
              return {lable: result.playerName, value: result.playerName, id: result.cardID, card: result};
            }));
            res(data);
          },
          minLength: 3,
          //function is what we want to do with the data, we can save it to a trade block here...
          select: function(event, ui){
            $("#players").append(`<li>${ui.item.card.playerName}</li>`);

            //everything is working, just need to find a way to grab the
            // card id from above and search for that record in mongodb. then i can return the specific card
            //and show the user/ add it to the list of cards.
            //might need to use just the name and show all cards with same name...
            //then they pick the card and a script will auto create the block...
            console.log(playerCards);
          }
        });
      });
    </script>




  <!-- <div class="form-group">
    <label for="tradeType">Trade Type</label>
    <select name="tradeType" class="form-control">
        <option value="Trading">Trading</option>
        <option <%= formData.tradeType && formData.tradeType === 'Looking For' ? 'selected' : null %> value="Looking For">Looking For</option>
    </select>
</div>

  <div class="form-group">
      <label for="title">Player Name</label>
      <input type="text" name="title" class="form-control" value="<%= formData.title %>">
  </div>

  <div class="form-group">
    <label for="cardLevel">Card Level</label>
    <input type="number" name="cardLevel" class="form-control" value="<%= formData.cardLevel %>">
</div>

  <div class="form-group">
    <label for="cardType">Card Type</label>
    <select name="cardType" class="form-control">
        <option value="Base">Base</option>
        <option value="MSP">MSP</option>
        <option value="SCP">SCP</option>
        <option value="TOTW">TOTW</option>
        <option value="TOTS">TOTS</option>
        <option value="Drafts">Drafts</option>
        <option value="Awards">Awards</option>
        </select>
  </div>


  

  <div class="form-group">
      <label for="trade">TT Card List:</label>
      <textarea name="trade" class="form-control summernote"><%= formData.trade %></textarea>
  </div>
  <div class="form-group">
    <label for="buyNow">Buy Now Amount(Coins):</label>
    <input type="number" name="buyNow" class="form-control summernote" value="<%= formData.buyNow %>">
  </div>
  


  <div class="form-group">
      <label for="tradeStatus">Trade Status</label>
      <select name="tradeStatus" class="form-control">
          <option value="Available">Available</option>
          <option <%= formData.tradeStatus && formData.tradeStatus === 'Traded' ? 'selected' : null %> value="Traded">Traded</option>
      </select>
  </div>

  <div class="form-group">
      <button class="btn btn-dark">Submit</button>
  </div>
</form> -->
